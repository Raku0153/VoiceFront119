import javax.swing.*;
import java.awt.*;
import javax.swing.border.Border;
import javax.swing.BorderFactory;
import javax.swing.border.LineBorder;


public class EmergencyMainUI extends JFrame {

    public EmergencyMainUI() {
        setTitle("119 상황 접수 시스템");
        setSize(900, 600);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        // 좌측 사이드바
        JPanel sidePanel = new JPanel();
        sidePanel.setBackground(Color.WHITE);
        sidePanel.setPreferredSize(new Dimension(250, getHeight()));
        sidePanel.setLayout(new BoxLayout(sidePanel, BoxLayout.Y_AXIS));

        JLabel nameLabel = new JLabel("이지성님");
        nameLabel.setFont(new Font("SansSerif", Font.BOLD, 20));
        nameLabel.setAlignmentX(Component.CENTER_ALIGNMENT);

        JLabel titleLabel = new JLabel("119 종합상황실");
        titleLabel.setFont(new Font("SansSerif", Font.PLAIN, 16));
        titleLabel.setAlignmentX(Component.CENTER_ALIGNMENT);

        sidePanel.add(Box.createVerticalStrut(100));
        sidePanel.add(nameLabel);
        sidePanel.add(Box.createVerticalStrut(10));
        sidePanel.add(titleLabel);
        
        
        
     // 사이드바 아래에 버튼 추가를 위한 여백 확보
        sidePanel.add(Box.createVerticalGlue()); // 위 요소들과 아래 버튼 사이 공간 확보

        // 좌하단 버튼
        JButton bottomButton = new JButton("긴급 출동"); // ← 여기에 원하는 텍스트 입력 가능
        bottomButton.setFont(new Font("SansSerif", Font.PLAIN, 14));
        bottomButton.setAlignmentX(Component.CENTER_ALIGNMENT);
        bottomButton.setFocusPainted(false);
        bottomButton.setBackground(new Color(220, 53, 69)); // 진한 레드 톤
        bottomButton.setForeground(Color.WHITE);
        bottomButton.setPreferredSize(new Dimension(200, 40));

        // 버튼 감싸는 패널로 여백 조정
        JPanel buttonWrapper = new JPanel();
        buttonWrapper.setBackground(Color.WHITE);
        buttonWrapper.setBorder(BorderFactory.createEmptyBorder(10, 20, 20, 20));
        buttonWrapper.setLayout(new BoxLayout(buttonWrapper, BoxLayout.Y_AXIS));
        buttonWrapper.add(bottomButton);
        
        sidePanel.add(buttonWrapper);

     // 이미지 아이콘 (좌측 하단 call.png)
        sidePanel.add(Box.createVerticalGlue()); // 나머지 컴포넌트 위로 밀어 올림

        ImageIcon callIcon = new ImageIcon("call.png");
        Image scaledImage = callIcon.getImage().getScaledInstance(100, 100, Image.SCALE_SMOOTH);
        JLabel callLabel = new JLabel(new ImageIcon(scaledImage));
        callLabel.setAlignmentX(Component.CENTER_ALIGNMENT);
        callLabel.setBorder(BorderFactory.createEmptyBorder(20, 0, 20, 0)); // 여백 추가

        sidePanel.add(callLabel);

        
        
        

        // 우측 메인 패널
        JPanel mainPanel = new JPanel();
        mainPanel.setBackground(new Color(255, 221, 191));
        mainPanel.setLayout(new BorderLayout());
        
        JPanel listPanel = new JPanel();
        listPanel.setLayout(new BoxLayout(listPanel, BoxLayout.Y_AXIS));
        listPanel.setOpaque(false);

        String[][] reports = {
        	    {"2025-03-24 17:46:14 서울특별시 용산구 서빙고동", "대물사고(구조)", "긴급도(중)"},
        	    {"2025-03-25 11:23:58 경기도 수원시 팔달구 인계동", "일반화재(화재)", "긴급도(상)"},
        	    {"2025-03-25 13:12:42 경기도 고양시 일산동구 백석동", "심정지 환자", "긴급도(최상)"},
        	    {"2025-03-25 15:50:06 서울특별시 송파구 잠실본동", "기타(기타)", "긴급도(하)"},
        	    {"2025-03-25 16:08:21 경기도 성남시 분당구 서현동", "질병(구급)", "긴급도(중)"}
        	};

        for (int i = 0; i < reports.length; i++) {
            String[] report = reports[i];
        	
            JPanel wrapperPanel = new JPanel();
            wrapperPanel.setLayout(new BoxLayout(wrapperPanel, BoxLayout.Y_AXIS));
            wrapperPanel.setOpaque(false);
        	
            JPanel itemPanel = new JPanel(new GridBagLayout());
            itemPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 50));
            itemPanel.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(0, 5, 0, 5); // 항목 간 좌우 여백
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.gridy = 0;
            
         // ▶ 토글 버튼
            gbc.gridx = 0;
            gbc.weightx = 0;
            JButton toggleButton = new JButton(">");
            toggleButton.setPreferredSize(new Dimension(40, 25));
            toggleButton.setFont(new Font("SansSerif", Font.BOLD, 12));
            toggleButton.setFocusPainted(false);
            toggleButton.setContentAreaFilled(false);
            itemPanel.add(toggleButton, gbc);


            // 주소 (60%)
            gbc.gridx = 1;
            gbc.weightx = 0.6;
            JLabel locationLabel = new JLabel(report[0]);
            locationLabel.setFont(new Font("SansSerif", Font.PLAIN, 14));
            itemPanel.add(locationLabel, gbc);

            // 사고 유형 (25%)
            gbc.gridx = 2;
            gbc.weightx = 0.25;
            JLabel typeLabel = new JLabel(report[1]);
            typeLabel.setFont(new Font("SansSerif", Font.PLAIN, 14));
            itemPanel.add(typeLabel, gbc);

            // 긴급도 (15%)
            gbc.gridx = 3;
            gbc.weightx = 0.15;
            JLabel urgencyLabel = new JLabel(report[2]);
            urgencyLabel.setFont(new Font("SansSerif", Font.PLAIN, 14));
            urgencyLabel.setHorizontalAlignment(SwingConstants.RIGHT);
            itemPanel.add(urgencyLabel, gbc);
            
            // 세부정보 패널
            JPanel detailPanel = new JPanel();
            detailPanel.setLayout(new BoxLayout(detailPanel, BoxLayout.Y_AXIS));
            detailPanel.setBorder(BorderFactory.createEmptyBorder(5, 70, 5, 10));
            detailPanel.setBackground(new Color(255, 255, 255, 200));
            detailPanel.setVisible(false); // 초기에는 숨김
            
            // 세부정보 내용
            JLabel detailLabel = new JLabel("<html>위치 :  <br>문제 : <br>목격위치 : <br>화재 발생 장소 : <br>허위신고 가능성 <br> 전화번호 : </html>");
            detailLabel.setFont(new Font("SansSerif", Font.PLAIN, 13));
            detailPanel.add(detailLabel);
            if (i == 0) {
                detailLabel.setText("<html>"
                    + "위치: 서울특별시 용산구 서빙고동<br>"
                    + "문제: 주차된 차량이 가로수에 의해 파손됨<br>"
                    + "목격위치: 서빙고역 2번 출구 앞<br>"
                    + "화재 발생 장소: 해당 없음<br>"
                    + "허위신고 가능성: 낮음<br>"
                    + "전화번호: 010-1234-5678"
                    + "</html>");
            }
            if (i == 1) {
                detailLabel.setText("<html>"
                    + "위치: 경기도 수원시 팔달구 인계동<br>"
                    + "문제: 상가 건물 내 전기 누전 화재<br>"
                    + "목격위치: 인계동 먹자골목 초입<br>"
                    + "화재 발생 장소: 건물 2층 사무실<br>"
                    + "허위신고 가능성: 없음<br>"
                    + "전화번호: 010-2345-6789"
                    + "</html>");
            }
            if (i == 2) {
                detailLabel.setText("<html>"
                    + "위치: 경기도 고양시 일산동구 백석동<br>"
                    + "문제: 심정지 환자 발생, CPR 요청<br>"
                    + "목격위치: 백석역 3번 출구 버스 정류장<br>"
                    + "화재 발생 장소: 해당 없음<br>"
                    + "허위신고 가능성: 없음<br>"
                    + "전화번호: 010-3456-7890"
                    + "</html>");
            }
            if (i == 3) {
                detailLabel.setText("<html>"
                    + "위치: 서울특별시 송파구 잠실본동<br>"
                    + "문제: 공원 내 의심 물체 신고<br>"
                    + "목격위치: 잠실본동 어린이공원 입구<br>"
                    + "화재 발생 장소: 해당 없음<br>"
                    + "허위신고 가능성: 중간<br>"
                    + "전화번호: 010-4567-8901"
                    + "</html>");
            }
            if (i == 4) {
                detailLabel.setText("<html>"
                    + "위치: 경기도 성남시 분당구 서현동<br>"
                    + "문제: 호흡곤란 및 고열 환자<br>"
                    + "목격위치: 서현역 1번 출구 앞 카페<br>"
                    + "화재 발생 장소: 해당 없음<br>"
                    + "허위신고 가능성: 없음<br>"
                    + "전화번호: 010-5678-9012"
                    + "</html>");
            }


            // 토글 버튼 이벤트
            toggleButton.addActionListener(e -> {
                boolean isVisible = detailPanel.isVisible();
                detailPanel.setVisible(!isVisible);
                toggleButton.setText(isVisible ? "▶" : "V");
                wrapperPanel.revalidate();
                wrapperPanel.repaint();
            });

            wrapperPanel.add(itemPanel);
            wrapperPanel.add(detailPanel);            
            

            listPanel.add(wrapperPanel);
            listPanel.add(Box.createVerticalStrut(10));
        }




        JScrollPane scrollPane = new JScrollPane(listPanel);
        scrollPane.setBorder(null);
        scrollPane.setOpaque(false);
        scrollPane.getViewport().setOpaque(false);

     // 검색창 패널
        JPanel searchPanel = new JPanel();
        searchPanel.setLayout(new BorderLayout());
        searchPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        searchPanel.setOpaque(false);

        // 검색 입력 필드
        JTextField searchField = new JTextField();
        searchField.setFont(new Font("SansSerif", Font.PLAIN, 14));
        searchField.setPreferredSize(new Dimension(200, 35));
        searchField.setText("주소 또는 사고 유형 검색...");
        searchField.setForeground(Color.GRAY);

        // 검색 버튼 (아이콘 대신 텍스트로)
        JButton searchButton = new JButton("검색");
        searchButton.setFont(new Font("SansSerif", Font.PLAIN, 14));
        searchButton.setPreferredSize(new Dimension(80, 35));
        searchButton.setFocusPainted(false);
        searchButton.setBackground(Color.DARK_GRAY);
        searchButton.setForeground(Color.WHITE);

        // 검색창 추가
        searchPanel.add(searchField, BorderLayout.CENTER);
        searchPanel.add(searchButton, BorderLayout.EAST);

        // mainPanel 상단에 추가
        mainPanel.add(searchPanel, BorderLayout.NORTH);

        
        mainPanel.add(scrollPane, BorderLayout.CENTER);

        getContentPane().setLayout(new BorderLayout());
        getContentPane().add(sidePanel, BorderLayout.WEST);
        getContentPane().add(mainPanel, BorderLayout.CENTER);

        setVisible(true);
    }
}
